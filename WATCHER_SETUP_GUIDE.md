# Personal AI Employee - Watcher System Setup Guide

## Overview

The Personal AI Employee system includes four watcher modules that monitor different sources and create action files in the `/Needs_Action` directory:

1. **Gmail Watcher** - Monitors Gmail for new emails
2. **WhatsApp Watcher** - Monitors WhatsApp messages via Twilio
3. **Bank Watcher** - Monitors bank transactions (with mock implementation)
4. **File Drop Watcher** - Monitors specified directories for new files

## Prerequisites

Install required Python packages:

```bash
pip install -r requirements.txt
```

## Configuration

### 1. Basic Setup
Run the setup script to create required directories and placeholder files:

```bash
python setup_watchers.py
```

This creates:
- All required directories for the Personal AI Employee system
- Placeholder credential files
- Updated watcher manager with error handling

### 2. Watcher Configuration

Edit `watcher_config.json` to customize settings:

```json
{
  "gmail_enabled": true,
  "whatsapp_enabled": true,
  "bank_enabled": true,
  "file_drop_enabled": true,
  "gmail_interval": 300,
  "whatsapp_interval": 60,
  "bank_interval": 600,
  "watch_directories": ["Watched_Files"],
  "needs_action_dir": "Needs_Action",
  "log_level": "INFO",
  "twilio_account_sid": "YOUR_TWILIO_ACCOUNT_SID",
  "twilio_auth_token": "YOUR_TWILIO_AUTH_TOKEN",
  "whatsapp_number": "whatsapp:+1234567890"
}
```

## Individual Watcher Setup

### Gmail Watcher

1. **Set up Google API credentials**:
   - Go to [Google Cloud Console](https://console.cloud.google.com/)
   - Create a new project or select existing one
   - Enable the Gmail API
   - Create credentials (OAuth 2.0 Client IDs)
   - Download the credentials JSON file
   - Rename to `credentials.json` and place in the root directory

2. **Required scopes**: `https://www.googleapis.com/auth/gmail.readonly`

3. **First run**: The system will guide you through OAuth authentication

### WhatsApp Watcher

1. **Set up Twilio account**:
   - Sign up at [Twilio](https://www.twilio.com/)
   - Get Account SID and Auth Token
   - Configure WhatsApp Sandbox or purchase a phone number

2. **Update config**:
   ```json
   {
     "twilio_account_sid": "your_actual_account_sid",
     "twilio_auth_token": "your_actual_auth_token",
     "whatsapp_number": "whatsapp:+your_phone_number"
   }
   ```

### Bank Watcher

The bank watcher currently uses a mock implementation. To connect to real bank APIs:

1. **Choose a bank data aggregation service**:
   - [Plaid](https://plaid.com/)
   - [Yodlee](https://www.yodlee.com/)
   - Direct bank APIs

2. **Update the `get_transactions_from_api()` method** in `bank_watcher.py` with your chosen service's integration

### File Drop Watcher

1. **Configure watched directories** in `watcher_config.json`:
   ```json
   {
     "watch_directories": ["Watched_Files", "Downloads", "Documents"]
   }
   ```

2. **The watcher automatically monitors these directories** for new files and creates action files in `/Needs_Action`

## Running the System

### 1. Single Run Test

Test individual watchers:

```bash
# Just the file drop watcher (doesn't need credentials)
python test_file_watcher_active.py

# Or run the full manager (will skip watchers without credentials)
python watcher_manager.py
```

### 2. Production Run

Run the manager to start all configured watchers:

```bash
python watcher_manager.py
```

The system will:
- Start all enabled watchers in separate threads
- Handle missing credentials gracefully
- Log activity and errors
- Continue running until interrupted (Ctrl+C)

## Action File Format

All watchers create standardized action files in `/Needs_Action`:

```yaml
---
type: email | whatsapp | bank | file
priority: high | normal
status: pending
# Additional fields based on type
---

## Content-specific details

---
**Automatically generated by [Watcher Name] at [timestamp]**
```

## Troubleshooting

### Common Issues

1. **Missing credentials**: Watchers without proper credentials will be skipped with warnings
2. **Missing dependencies**: Install with `pip install -r requirements.txt`
3. **Permission errors**: Ensure the script has read/write access to monitored directories
4. **Network issues**: Check internet connectivity for API-based watchers

### Verifying File Drop Watcher

The file drop watcher was tested and confirmed working. To verify:

1. Place any file in the `Watched_Files/` directory
2. Check `Needs_Action/` for a new action file
3. The action file will follow the standard format

## Security Considerations

- Store API credentials securely
- Never commit credential files to version control
- Use environment variables for sensitive data in production
- Regularly rotate API keys
- Monitor access logs for unusual activity

## Next Steps

1. Set up your preferred watchers with proper credentials
2. Test each watcher individually before running the full system
3. Monitor the `/Needs_Action` directory for incoming items
4. Implement your AI Employee's response workflows