# Generate Action Plan - Bronze Tier Skill

## User Input
```text
$ARGUMENTS
```

## Outline

You are generating a detailed action plan for a specific item in the `/Needs_Action` folder. This is a core Bronze Tier reasoning capability.

### Execution Flow:

1. **Identify Target Item**
   - If user provides item name/path: use that specific item
   - If no argument: process the oldest unprocessed item in `/Needs_Action`
   - Read the item's frontmatter and content

2. **Context Gathering**
   - Read `Company_Handbook.md` for decision rules
   - Read `Business_Goals.md` for strategic alignment (if exists)
   - Check Decision Matrix for action type classification
   - Determine if action requires approval based on:
     - Communication (Email/SMS): Requires approval
     - Financial Transactions: Requires approval
     - Content Creation: May require approval
     - Information Processing: Can act independently

3. **Analyze the Item**
   Based on item type:

   **For Email (`type: email`)**:
   - Sender: known contact or new contact?
   - Subject/Content: What is being requested?
   - Priority: Is this urgent or time-sensitive?
   - Action needed: Reply, forward, archive, flag for review?

   **For WhatsApp (`type: whatsapp`)**:
   - Sender: client, colleague, personal contact?
   - Keywords: urgent, payment, invoice, help, etc.
   - Context: Business or personal?
   - Action needed: Reply, create task, escalate?

   **For Bank Transaction (`type: bank`)**:
   - Type: debit or credit?
   - Amount: Above threshold ($500)?
   - Merchant: Subscription, one-time, recurring?
   - Action needed: Categorize, flag unusual, suggest cost-cutting?

   **For File Drop (`type: file_drop`)**:
   - File type: Document, image, data, code?
   - Size: Small, medium, large?
   - Purpose: Review, process, archive?
   - Action needed: Classify, extract data, create summary?

4. **Generate Plan Structure**
   Create a plan file: `/Plans/PLAN_<type>_<item-identifier>_<timestamp>.md`

   ```markdown
   ---
   created: <ISO timestamp>
   source_item: <path to original item>
   status: pending
   requires_approval: <yes|no>
   priority: <high|normal>
   ---

   # Action Plan: <Brief Title>

   ## Source
   - Type: <email|whatsapp|bank|file>
   - From: <sender/source>
   - Received: <timestamp>

   ## Objective
   <1-2 sentence description of what needs to be accomplished>

   ## Analysis
   <Brief analysis of the item content and required action>

   ## Steps
   - [ ] Step 1: <action> (Status: pending)
   - [ ] Step 2: <action> (Status: pending)
   - [ ] Step 3: <action> **[REQUIRES APPROVAL]** (Status: pending)
   - [ ] Step 4: <action> (Status: pending)

   ## Approval Required
   <Yes|No>

   **If Yes**: This plan requires human approval because:
   - <reason 1: e.g., involves sending external communication>
   - <reason 2: e.g., involves financial transaction>

   **How to Approve**:
   Move this file to `/Approved` to proceed with execution.

   **How to Reject**:
   Move this file to `/Rejected` to cancel this plan.

   ## Success Criteria
   - [ ] <measurable outcome 1>
   - [ ] <measurable outcome 2>

   ## Constraints
   - Constitution Principle: <applicable principle(s)>
   - Must not: <any prohibited actions>
   - Must comply with: <any specific rules>

   ## Estimated Complexity
   <Simple | Medium | Complex>
   - Simple: 1-2 steps, no approvals needed
   - Medium: 3-5 steps, may require approval
   - Complex: 6+ steps, multiple approvals, multi-stage

   ---
   *Plan generated by AI Employee on <timestamp>*
   ```

5. **Determine Next Action**
   Based on requires_approval:

   **If NO approval required**:
   - Keep plan in `/Plans` for execution (Silver/Gold tier)
   - For Bronze tier: Just create the plan (no execution yet)

   **If approval required**:
   - Create approval request in `/Pending_Approval`
   - Name it: `APPROVAL_<type>_<identifier>.md`
   - Wait for human to move it to `/Approved` or `/Rejected`

6. **Update References**
   - Original item in `/Needs_Action`: Add link to plan file
   - Dashboard: Increment "Active Tasks" count

### Acceptance Criteria:
- Plan file created in `/Plans` with all sections filled
- Plan references the source item
- Approval requirements clearly stated
- Steps are actionable and measurable
- Constitution principles referenced in Constraints

### Constraints:
- MUST follow Constitution Principle II (Human-in-the-Loop)
- MUST follow Constitution Principle V (File-Based Workflow)
- Plans must be actionable, not vague
- Every step should be checkable ([ ] format)
- Sensitive steps clearly marked **[REQUIRES APPROVAL]**

### Output:
Confirm plan creation:
- Plan file: <path>
- Source item: <path>
- Requires approval: <Yes/No>
- Number of steps: <count>
- Estimated complexity: <Simple/Medium/Complex>

---

**Note**: This is a Bronze Tier skill for plan generation only. For Silver/Gold tiers, this will be enhanced with automatic execution for approved plans.

### Example Plans:

**Example 1: Email Response**
```
Objective: Respond to client request for project status update
Steps:
- [ ] Gather current project metrics from /Accounting
- [ ] Draft professional email response
- [ ] Review draft for accuracy **[REQUIRES APPROVAL]**
- [ ] Send email response (after approval)
Requires Approval: Yes (email communication)
```

**Example 2: Bank Transaction Categorization**
```
Objective: Categorize new subscription charge and check if still needed
Steps:
- [ ] Identify merchant (Netflix)
- [ ] Check last login date for service
- [ ] Categorize as "Entertainment" expense
- [ ] Flag for review if unused >30 days
Requires Approval: No (information processing only)
```
